# 并发
1. 并发解耦了完成什么与何时完成，极大提升程序吞吐量与结构
2. 三个误区：并发总能提升性能；编写并发不改变系统设计；不用了解并发容器在干什么
3. 并发会有额外开销；即便简单问题的并发也是复杂的；并发bug通常难以复现；并发常根本性改变设计策略
4. 并发性防御原则：单一职责原则：建议将并发代码与其他代码分离
5. 推论：限制数据作用域，严格限制访问共享数据
6. 推论：使用数据副本以减少数据共享
7. 推论：线程间尽量独立，例如将数据集划分为独立子集给各线程处理
8. 了解你的库：看看哪些是线程安全的
9. 了解你的执行模型：每种模型有特定处理
10. 生产者-消费者型：生产者往队列添加资源，消费者从队列取出资源
11. 读写者型：读取器不能在写入器更新资源时读取，写入器不能在读取器读取时写入新信息，须平衡两者的需求来设定优先级
12. 哲学家吃饭型：圆桌坐群哲学家，每人间隔中间仅有一把叉子，每人思考饿了就要吃东西，且要同时用左右两边的叉子，吃完再放回去，叉子缺一把就得等着；对应多线程竞争资源
13. 注意同步方法间的依赖性：避免在共享对象上使用多个方法；迫不得已时应考虑锁定其中一方
14. 尽量让同步部分小些
15. 编写能正确关闭的多线程代码很难：有各种各样的死锁
16. 仔细测试：不要忽略只出现一次的问题；先让单线程代码正确运行
17. 提升可扩展性，能在各种配置下运行
18. 多线程代码的配置应该可调节
19. 让线程数大于处理器核心数，逼出潜在bug
20. 在多个操作系统平台上测试，因为各系统的调度策略不同
21. 参入等待、睡眠等扰动函数改变执行顺序以逼出bug
